---
title: Analytics Dashboard
permalink: /analytics-dashboard/
menu_item: false
---

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
.dashboard-nav {
  text-align: center;
  margin: 2rem 0 3rem 0;
  padding: 1.5rem 0;
  border-bottom: 2px solid #f3f5fa;
}

.dashboard-nav h2 {
  margin: 0 0 1.5rem 0;
  color: #283039;
  font-size: 1.8rem;
}

.dashboard-nav-links {
  display: flex;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
}

.dashboard-nav-links a {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background: #0072bc;
  color: white;
  text-decoration: none;
  border-radius: 25px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 114, 188, 0.2);
}

.dashboard-nav-links a:hover {
  background: #174867;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 114, 188, 0.3);
  color: white;
  text-decoration: none;
}

.chart-section {
  margin: 3rem 0;
  position: relative;
}

.chart-section:not(:last-child)::after {
  content: '';
  display: block;
  margin: 3rem auto;
  width: 80%;
  height: 1px;
  background: linear-gradient(to right, transparent, #e0e0e0, transparent);
}

.chart-container {
  margin: 1rem 0;
}

@media (max-width: 768px) {
  .dashboard-nav-links {
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
  
  .dashboard-nav-links a {
    width: 80%;
    max-width: 300px;
  }
}
</style>

<div class="dashboard-nav">
  <h2>Analytics Dashboard</h2>
  <div class="dashboard-nav-links">
    <a href="#country-users">Users by Country</a>
    <a href="#monthly-users">Users by Month</a>
    <a href="#country-per-capita">Users by Country (Per Capita)</a>
  </div>
</div>

<div id="country-users" class="chart-section">
  <div id="map-container" class="chart-container"></div>
</div>

<div id="monthly-users" class="chart-section">
  <div id="month-container" class="chart-container"></div>
</div>

<div id="country-per-capita" class="chart-section">
  <div id="map-container-percapita" class="chart-container"></div>
</div>

<script>
  // Smooth scroll for navigation links
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.dashboard-nav-links a').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  });

  const BASE_DATA_URL = "https://quantecon.github.io/website-dynamic";

  /**
   * 1. Fetch and Render the Choropleth Map
   */
  fetch(`${BASE_DATA_URL}/map_data.json`)
    .then(response => {
      if (!response.ok) {
        throw new Error("Network response was not ok " + response.statusText);
      }
      return response.json();
    })
    .then(data => {
      // data is an array of objects:
      // [ { country: "Australia", iso_alpha_3: "AUS", users: 123 }, ... ]

      const isoCodes = data.map(row => row.iso_alpha_3);
      const usersArr = data.map(row => row.users);
      const hoverText = data.map(row => row.country);

      const trace = {
        type: 'choropleth',
        locations: isoCodes,
        z: usersArr,
        text: hoverText,
        hovertemplate: "<b>Country: %{text}</b><br>Users: %{z}<extra></extra>",
        colorscale: 'Portland',
        colorbar: {
          title: 'Users'
        }
      };

      const layout = {
        title: 'Active Users by Country (last six months)',
        geo: {
          showframe: false,
          showcoastlines: true,
          projection: { type: 'natural earth' }
        },
        margin: { l: 0, r: 0, t: 50, b: 0 },
        title_x: 0.5
      };

      Plotly.newPlot('map-container', [trace], layout);
    })
    .catch(err => {
      console.error("Error loading map_data.json:", err);
    });


  /**
   * 2. Fetch and Render the Monthly Users Line Chart
   */
  fetch(`${BASE_DATA_URL}/month_data.json`)
    .then(response => {
      if (!response.ok) {
        throw new Error("Network response was not ok " + response.statusText);
      }
      return response.json();
    })
    .then(data => {
      // data is an array of objects:
      // [ { month_formatted: "Feb 2024", users: 567 }, ... ]

      const xValues = data.map(row => row.month_formatted);
      const yValues = data.map(row => row.users);

      const trace = {
        type: 'scatter',
        mode: 'lines+markers',
        x: xValues,
        y: yValues,
        hovertemplate: "Month: %{x}<br>Users: %{y}<extra></extra>",
        line: { shape: 'linear', color: 'teal' },
        marker: { size: 6 }
      };

      const layout = {
        title: 'Monthly Users',
        xaxis: { title: 'Month' },
        yaxis: {
          title: 'Number of Users',
          range: [0, Math.max(...yValues) * 1.1]
        },
        margin: { l: 50, r: 20, t: 50, b: 50 },
        title_x: 0.5
      };

      Plotly.newPlot('month-container', [trace], layout);
    })
    .catch(err => {
      console.error("Error loading month_data.json:", err);
    });

/**
* 3. Fetch and Render the Choropleth Map (per capita)
*/
fetch(`${BASE_DATA_URL}/map_data.json`)
 .then(response => {
   if (!response.ok) {
     throw new Error("Network response was not ok " + response.statusText);
   }
   return response.json();
 })
 .then(data => {
   // data is an array of objects:
   // [ { country: "Australia", iso_alpha_3: "AUS", users: 123 }, ... ]

   const isoCodes = data.map(row => row.iso_alpha_3);
   const usersArr = data.map(row => row.users_per_capita);
   const hoverText = data.map(row => row.country);

   const trace = {
     type: 'choropleth',
     locations: isoCodes,
     z: usersArr,
     text: hoverText,
     hovertemplate: "<b>Country: %{text}</b><br>Users (per capita): %{z}<extra></extra>",
     colorscale: 'Portland',
     colorbar: {
       title: 'Users (per capita)'
     }
   };

   const layout = {
     title: 'Active Users (per capita) by Country (last six months)',
     geo: {
       showframe: false,
       showcoastlines: true,
       projection: { type: 'natural earth' }
     },
     margin: { l: 0, r: 0, t: 50, b: 0 },
     title_x: 0.5
   };

   Plotly.newPlot('map-container-percapita', [trace], layout);
 })
 .catch(err => {
   console.error("Error loading map_data.json:", err);
 });

</script>